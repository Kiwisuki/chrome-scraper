networks:
  web:
    external: true

services:
  scraping_service:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - CONCURRENCY_LIMIT=5
    networks:
      - web
    labels:
      traefik.enable: "true"
      traefik.http.routers.scraping_service.rule: Host(`scraper.kiwisaki.com`)
      traefik.http.routers.scraping_service.entrypoints: websecure
      traefik.http.routers.scraping_service.tls.certresolver: myresolver
      traefik.http.services.scraping_service.loadbalancer.server.port: 8000